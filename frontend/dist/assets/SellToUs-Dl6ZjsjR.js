const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImageUploader-DWnjEkzb.js","assets/react-query-BGeIQRPr.js","assets/react-CTDr35rJ.js"])))=>i.map(i=>d[i]);
import{a as B,_ as P}from"./index-CM4s-_6C.js";import{j as e}from"./react-query-BGeIQRPr.js";import{r as m}from"./react-CTDr35rJ.js";import{u as T,a as D,C as n,o as q,s as c,c as M,b as V,e as _}from"./zod-SQF3v9p3.js";import{F as o}from"./FormField-DCIQlhW3.js";import{I as d,l as S,n as G,B as O}from"./antd-C_PMe3Fi.js";const U=m.lazy(()=>P(()=>import("./ImageUploader-DWnjEkzb.js"),__vite__mapDeps([0,1,2]))),k=q({contact_name:c().min(1,"Name is required"),email:c().email("Invalid email"),phone:c().optional(),brand:_(["NVIDIA","AMD","Intel"],{required_error:"Brand is required"}),model:c().min(1,"Model is required"),grade:_(["A","B","C"]).default("B"),warranty:V().default(!1),accessories:c().optional(),expected_price:M.number().min(1,"Expected price must be â‰¥ 1"),note:c().optional()});function J(){var x,f,j,u,p,b,v,g,N,y;const[F,I]=m.useState([]),[C,h]=m.useState(!1),{control:a,handleSubmit:E,formState:{errors:r}}=T({resolver:D(k),defaultValues:{grade:"B",warranty:!1}});async function A(s){var w;const l=new FormData;Object.entries(s).forEach(([i,t])=>{t!=null&&(typeof t=="boolean"?l.set(i,t?"true":"false"):l.set(i,String(t)))}),F.slice(0,10).forEach(i=>l.append("images",i)),h(!0);try{const i=await B("/api/quotes",{method:"POST",body:l});if(!i.ok){const t=((w=await i.json().catch(()=>({})))==null?void 0:w.error)||"Submit failed";window.dispatchEvent(new CustomEvent("app-toast",{detail:{text:t,type:"error"}}));return}window.dispatchEvent(new CustomEvent("app-toast",{detail:{text:"Submitted, we will contact you soon",type:"success"}}))}finally{h(!1)}}return e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{children:"Sell to us"}),e.jsx("div",{className:"form-description",children:e.jsx("p",{children:"Get a no-obligation quote for your GPU. Share basic details and photos. We'll email you with an offer and next steps."})}),e.jsxs("form",{onSubmit:E(A),className:"modern-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Personal Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Your Name",htmlFor:"contact_name",error:(x=r.contact_name)==null?void 0:x.message,children:e.jsx(n,{name:"contact_name",control:a,render:({field:s})=>e.jsx(d,{id:"contact_name",...s})})})}),e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Email",htmlFor:"email",error:(f=r.email)==null?void 0:f.message,children:e.jsx(n,{name:"email",control:a,render:({field:s})=>e.jsx(d,{id:"email",type:"email",...s})})})}),e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Phone",htmlFor:"phone",error:(j=r.phone)==null?void 0:j.message,children:e.jsx(n,{name:"phone",control:a,render:({field:s})=>e.jsx(d,{id:"phone",...s})})})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Product Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Brand",htmlFor:"brand",error:(u=r.brand)==null?void 0:u.message,children:e.jsx(n,{name:"brand",control:a,render:({field:s})=>e.jsx(S,{id:"brand",value:s.value,onChange:l=>s.onChange(l),options:[{value:"NVIDIA",label:"NVIDIA"},{value:"AMD",label:"AMD"},{value:"Intel",label:"Intel"}]})})})}),e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Model",htmlFor:"model",error:(p=r.model)==null?void 0:p.message,children:e.jsx(n,{name:"model",control:a,render:({field:s})=>e.jsx(d,{id:"model",...s})})})}),e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Grade",htmlFor:"grade",error:(b=r.grade)==null?void 0:b.message,children:e.jsx(n,{name:"grade",control:a,render:({field:s})=>e.jsx(S,{id:"grade",value:s.value,onChange:l=>s.onChange(l),options:[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"}]})})})}),e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Warranty",htmlFor:"warranty",error:(v=r.warranty)==null?void 0:v.message,children:e.jsx(n,{name:"warranty",control:a,render:({field:s})=>e.jsx(G,{id:"warranty",checked:s.value,onChange:l=>s.onChange(l)})})})}),e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Accessories",htmlFor:"accessories",error:(g=r.accessories)==null?void 0:g.message,children:e.jsx(n,{name:"accessories",control:a,render:({field:s})=>e.jsx(d,{id:"accessories",...s})})})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Price & Note"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("div",{className:"form-field",children:e.jsx(o,{label:"Expected Price",htmlFor:"expected_price",error:(N=r.expected_price)==null?void 0:N.message,children:e.jsx(n,{name:"expected_price",control:a,render:({field:s})=>e.jsx(d,{id:"expected_price",...s})})})}),e.jsx("div",{className:"form-field-full",children:e.jsx(o,{label:"Note",htmlFor:"note",error:(y=r.note)==null?void 0:y.message,children:e.jsx(n,{name:"note",control:a,render:({field:s})=>e.jsx(d.TextArea,{id:"note",rows:5,...s})})})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Images"}),e.jsx("div",{className:"form-field-full",children:e.jsx(m.Suspense,{fallback:null,children:e.jsx(U,{onChange:I})})})]}),e.jsx("div",{className:"form-actions",children:e.jsx(O,{type:"primary",htmlType:"submit",loading:C,className:"submit-btn",children:"Submit"})})]})]})}export{J as default};
