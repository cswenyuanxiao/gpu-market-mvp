const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImageUploader-DWnjEkzb.js","assets/react-query-BGeIQRPr.js","assets/react-CTDr35rJ.js"])))=>i.map(i=>d[i]);
import{a as B,_ as P}from"./index-D2ouO1JT.js";import{j as e}from"./react-query-BGeIQRPr.js";import{r as m}from"./react-CTDr35rJ.js";import{u as T,a as D,C as o,o as q,s as c,c as M,b as V,e as _}from"./zod-SQF3v9p3.js";import{F as i}from"./FormField-iyrhpl26.js";import{I as d,l as S,n as G,B as O}from"./antd-C_PMe3Fi.js";const U=m.lazy(()=>P(()=>import("./ImageUploader-DWnjEkzb.js"),__vite__mapDeps([0,1,2]))),k=q({contact_name:c().min(1,"Name is required"),email:c().email("Invalid email"),phone:c().optional(),brand:_(["NVIDIA","AMD"],{required_error:"Brand is required"}),model:c().min(1,"Model is required"),grade:_(["A","B","C"]).default("B"),warranty:V().default(!1),accessories:c().optional(),expected_price:M.number().min(1,"Expected price must be â‰¥ 1"),note:c().optional()});function J(){var x,f,j,p,u,b,v,g,N,y;const[F,C]=m.useState([]),[I,h]=m.useState(!1),{control:a,handleSubmit:E,formState:{errors:r}}=T({resolver:D(k),defaultValues:{grade:"B",warranty:!1}});async function A(s){var w;const l=new FormData;Object.entries(s).forEach(([n,t])=>{t!=null&&(typeof t=="boolean"?l.set(n,t?"true":"false"):l.set(n,String(t)))}),F.slice(0,10).forEach(n=>l.append("images",n)),h(!0);try{const n=await B("/api/quotes",{method:"POST",body:l});if(!n.ok){const t=((w=await n.json().catch(()=>({})))==null?void 0:w.error)||"Submit failed";window.dispatchEvent(new CustomEvent("app-toast",{detail:{text:t,type:"error"}}));return}window.dispatchEvent(new CustomEvent("app-toast",{detail:{text:"Submitted, we will contact you soon",type:"success"}}))}finally{h(!1)}}return e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{children:"Sell to us"}),e.jsx("div",{className:"form-description",children:e.jsx("p",{children:"Get a no-obligation quote for your GPU. Share basic details and photos. We'll email you with an offer and next steps."})}),e.jsxs("form",{onSubmit:E(A),className:"modern-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Personal Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Your Name",htmlFor:"contact_name",error:(x=r.contact_name)==null?void 0:x.message,children:e.jsx(o,{name:"contact_name",control:a,render:({field:s})=>e.jsx(d,{id:"contact_name",...s})})})}),e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Email",htmlFor:"email",error:(f=r.email)==null?void 0:f.message,children:e.jsx(o,{name:"email",control:a,render:({field:s})=>e.jsx(d,{id:"email",type:"email",...s})})})}),e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Phone",htmlFor:"phone",error:(j=r.phone)==null?void 0:j.message,children:e.jsx(o,{name:"phone",control:a,render:({field:s})=>e.jsx(d,{id:"phone",...s})})})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Product Information"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Brand",htmlFor:"brand",error:(p=r.brand)==null?void 0:p.message,children:e.jsx(o,{name:"brand",control:a,render:({field:s})=>e.jsx(S,{id:"brand",value:s.value,onChange:l=>s.onChange(l),options:[{value:"NVIDIA",label:"NVIDIA"},{value:"AMD",label:"AMD"}]})})})}),e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Model",htmlFor:"model",error:(u=r.model)==null?void 0:u.message,children:e.jsx(o,{name:"model",control:a,render:({field:s})=>e.jsx(d,{id:"model",...s})})})}),e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Grade",htmlFor:"grade",error:(b=r.grade)==null?void 0:b.message,children:e.jsx(o,{name:"grade",control:a,render:({field:s})=>e.jsx(S,{id:"grade",value:s.value,onChange:l=>s.onChange(l),options:[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"}]})})})}),e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Warranty",htmlFor:"warranty",error:(v=r.warranty)==null?void 0:v.message,children:e.jsx(o,{name:"warranty",control:a,render:({field:s})=>e.jsx(G,{id:"warranty",checked:s.value,onChange:l=>s.onChange(l)})})})}),e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Accessories",htmlFor:"accessories",error:(g=r.accessories)==null?void 0:g.message,children:e.jsx(o,{name:"accessories",control:a,render:({field:s})=>e.jsx(d,{id:"accessories",...s})})})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Price & Note"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("div",{className:"form-field",children:e.jsx(i,{label:"Expected Price",htmlFor:"expected_price",error:(N=r.expected_price)==null?void 0:N.message,children:e.jsx(o,{name:"expected_price",control:a,render:({field:s})=>e.jsx(d,{id:"expected_price",...s})})})}),e.jsx("div",{className:"form-field-full",children:e.jsx(i,{label:"Note",htmlFor:"note",error:(y=r.note)==null?void 0:y.message,children:e.jsx(o,{name:"note",control:a,render:({field:s})=>e.jsx(d.TextArea,{id:"note",rows:5,...s})})})})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Images"}),e.jsx("div",{className:"form-field-full",children:e.jsx(m.Suspense,{fallback:null,children:e.jsx(U,{onChange:C})})})]}),e.jsx("div",{className:"form-actions",children:e.jsx(O,{type:"primary",htmlType:"submit",loading:I,className:"submit-btn",children:"Submit"})})]})]})}export{J as default};
