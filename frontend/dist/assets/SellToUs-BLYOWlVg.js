const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ImageUploader-DWnjEkzb.js","assets/react-query-BGeIQRPr.js","assets/react-CTDr35rJ.js"])))=>i.map(i=>d[i]);
import{a as B,_ as T}from"./index-DSYhX2QC.js";import{j as e}from"./react-query-BGeIQRPr.js";import{r as m}from"./react-CTDr35rJ.js";import{u as D,a as q,C as n,o as M,s as c,c as P,b as V,e as _}from"./zod-SQF3v9p3.js";import{F as o}from"./FormField-iyrhpl26.js";import{I as d,S,d as O,B as k}from"./antd-n40S5sxn.js";const L=m.lazy(()=>T(()=>import("./ImageUploader-DWnjEkzb.js"),__vite__mapDeps([0,1,2]))),R=M({contact_name:c().min(1,"Name is required"),email:c().email("Invalid email"),phone:c().optional(),brand:_(["NVIDIA","AMD"],{required_error:"Brand is required"}),model:c().min(1,"Model is required"),grade:_(["A","B","C"]).default("B"),warranty:V().default(!1),accessories:c().optional(),expected_price:P.number().min(1,"Expected price must be â‰¥ 1"),note:c().optional()});function J(){var x,p,u,j,b,g,v,f,y,w;const[F,C]=m.useState([]),[E,h]=m.useState(!1),{control:r,handleSubmit:A,formState:{errors:s}}=D({resolver:q(R),defaultValues:{grade:"B",warranty:!1}});async function I(a){var N;const l=new FormData;Object.entries(a).forEach(([t,i])=>{i!=null&&(typeof i=="boolean"?l.set(t,i?"true":"false"):l.set(t,String(i)))}),F.slice(0,10).forEach(t=>l.append("images",t)),h(!0);try{const t=await B("/api/quotes",{method:"POST",body:l});if(!t.ok){const i=((N=await t.json().catch(()=>({})))==null?void 0:N.error)||"Submit failed";window.dispatchEvent(new CustomEvent("app-toast",{detail:{text:i,type:"error"}}));return}window.dispatchEvent(new CustomEvent("app-toast",{detail:{text:"Submitted, we will contact you soon",type:"success"}}))}finally{h(!1)}}return e.jsxs("div",{className:"container py-3",style:{maxWidth:800},children:[e.jsx("h3",{children:"Sell to us"}),e.jsxs("form",{onSubmit:A(I),children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Your Name",htmlFor:"contact_name",error:(x=s.contact_name)==null?void 0:x.message,children:e.jsx(n,{name:"contact_name",control:r,render:({field:a})=>e.jsx(d,{id:"contact_name",...a})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Email",htmlFor:"email",error:(p=s.email)==null?void 0:p.message,children:e.jsx(n,{name:"email",control:r,render:({field:a})=>e.jsx(d,{id:"email",type:"email",...a})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Phone",htmlFor:"phone",error:(u=s.phone)==null?void 0:u.message,children:e.jsx(n,{name:"phone",control:r,render:({field:a})=>e.jsx(d,{id:"phone",...a})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Brand",htmlFor:"brand",error:(j=s.brand)==null?void 0:j.message,children:e.jsx(n,{name:"brand",control:r,render:({field:a})=>e.jsx(S,{id:"brand",value:a.value,onChange:l=>a.onChange(l),options:[{value:"NVIDIA",label:"NVIDIA"},{value:"AMD",label:"AMD"}]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Model",htmlFor:"model",error:(b=s.model)==null?void 0:b.message,children:e.jsx(n,{name:"model",control:r,render:({field:a})=>e.jsx(d,{id:"model",...a})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Grade",htmlFor:"grade",error:(g=s.grade)==null?void 0:g.message,children:e.jsx(n,{name:"grade",control:r,render:({field:a})=>e.jsx(S,{id:"grade",value:a.value,onChange:l=>a.onChange(l),options:[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"}]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Warranty",htmlFor:"warranty",error:(v=s.warranty)==null?void 0:v.message,children:e.jsx(n,{name:"warranty",control:r,render:({field:a})=>e.jsx(O,{id:"warranty",checked:a.value,onChange:l=>a.onChange(l)})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Accessories",htmlFor:"accessories",error:(f=s.accessories)==null?void 0:f.message,children:e.jsx(n,{name:"accessories",control:r,render:({field:a})=>e.jsx(d,{id:"accessories",...a})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx(o,{label:"Expected Price",htmlFor:"expected_price",error:(y=s.expected_price)==null?void 0:y.message,children:e.jsx(n,{name:"expected_price",control:r,render:({field:a})=>e.jsx(d,{id:"expected_price",...a})})})}),e.jsx("div",{className:"col-12",children:e.jsx(o,{label:"Note",htmlFor:"note",error:(w=s.note)==null?void 0:w.message,children:e.jsx(n,{name:"note",control:r,render:({field:a})=>e.jsx(d.TextArea,{id:"note",rows:5,...a})})})})]}),e.jsx("div",{className:"mb-3",children:e.jsx(m.Suspense,{fallback:null,children:e.jsx(L,{onChange:C})})}),e.jsx(k,{type:"primary",htmlType:"submit",loading:E,children:"Submit"})]})]})}export{J as default};
