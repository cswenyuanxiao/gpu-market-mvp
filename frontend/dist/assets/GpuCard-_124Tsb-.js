import{j as s}from"./react-query-BGeIQRPr.js";import{f as S,a as p}from"./format-CopOq-7K.js";import{r}from"./react-CTDr35rJ.js";function u({src:e,alt:t="",className:i,style:a,width:v,height:h,srcSet:f,sizes:j,fallbackSrc:l}){const d=r.useRef(null),[n,o]=r.useState(!1),[N,b]=r.useState(!1);r.useEffect(()=>{const m=d.current;if(!m)return;if(!("IntersectionObserver"in window)){o(!0);return}const c=new IntersectionObserver(w=>{const x=w[0];x&&x.isIntersecting&&(o(!0),c.disconnect())},{rootMargin:"200px"});return c.observe(m),()=>c.disconnect()},[]);const _=N&&l?l:e;return s.jsx("img",{ref:d,src:n?_:void 0,srcSet:n?f:void 0,sizes:n?j:void 0,alt:t,className:i,style:{backgroundColor:"#f5f5f5",...a},width:v,height:h,loading:"lazy",onError:()=>b(!0)})}function D({gpu:e,onDetails:t}){const i=(()=>{if(!e.created_at)return!1;const a=new Date(e.created_at).getTime();return Date.now()-a<6048e5})();return s.jsxs("div",{className:"modern-gpu-card",children:[e.image_path&&s.jsx("div",{className:"card-image",children:s.jsx(u,{src:e.image_path,fallbackSrc:e.seller_avatar||void 0,srcSet:`${e.image_path} 1x, ${e.image_path} 2x`,sizes:"(max-width: 768px) 100vw, 33vw",className:"product-image",alt:e.title})}),s.jsxs("div",{className:"card-content",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h3",{className:"product-title",title:e.title,children:e.title}),s.jsx("div",{className:"product-price",children:S(e.price)})]}),s.jsxs("div",{className:"status-tags",children:[i&&s.jsx("span",{className:"tag tag-new",children:"Just added"}),s.jsx("span",{className:`tag tag-condition ${e.condition==="New"?"tag-new":"tag-used"}`,children:e.condition}),e.brand&&s.jsx("span",{className:"tag tag-brand",children:e.brand}),e.vram_gb&&e.vram_gb>0&&s.jsxs("span",{className:"tag tag-vram",children:[e.vram_gb,"GB"]})]}),s.jsx("p",{className:"product-description",children:e.description&&e.description.length>80?s.jsxs(s.Fragment,{children:[e.description.slice(0,80),"...",s.jsx("button",{className:"read-more-btn",onClick:a=>{a.preventDefault(),a.currentTarget.previousSibling,a.currentTarget.parentElement.textContent=e.description||""},children:"Read more"})]}):e.description||""}),s.jsxs("div",{className:"card-footer",children:[s.jsxs("div",{className:"seller-info",children:[e.seller_avatar&&s.jsx("img",{src:e.seller_avatar,className:"seller-avatar",alt:`${e.seller_name||"Seller"} avatar`}),s.jsxs("div",{className:"seller-details",children:[s.jsxs("span",{className:"seller-name",children:["Seller: ",e.seller_name||""]}),e.created_at&&s.jsxs("span",{className:"added-date",children:["Added: ",p(e.created_at)]})]})]}),s.jsx("button",{className:"details-btn",onClick:()=>t(e.id),children:"Details"})]})]})]})}export{D as G};
