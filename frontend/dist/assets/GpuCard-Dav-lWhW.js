import{j as s}from"./react-query-BGeIQRPr.js";import{f as y,a as _}from"./format-CopOq-7K.js";import{r}from"./react-CTDr35rJ.js";function u({src:e,alt:a="",className:i,style:t,width:f,height:h,srcSet:b,sizes:v,fallbackSrc:c}){const d=r.useRef(null),[n,o]=r.useState(!1),[j,N]=r.useState(!1);r.useEffect(()=>{const m=d.current;if(!m)return;if(!("IntersectionObserver"in window)){o(!0);return}const l=new IntersectionObserver(g=>{const x=g[0];x&&x.isIntersecting&&(o(!0),l.disconnect())},{rootMargin:"200px"});return l.observe(m),()=>l.disconnect()},[]);const w=j&&c?c:e;return s.jsx("img",{ref:d,src:n?w:void 0,srcSet:n?b:void 0,sizes:n?v:void 0,alt:a,className:i,style:{backgroundColor:"#f5f5f5",...t},width:f,height:h,loading:"lazy",onError:()=>N(!0)})}function k({gpu:e,onDetails:a}){const i=(()=>{if(!e.created_at)return!1;const t=new Date(e.created_at).getTime();return Date.now()-t<6048e5})();return s.jsx("div",{className:"card card-rounded mb-3",style:{maxWidth:"100%",overflow:"hidden"},children:s.jsxs("div",{className:"row g-0",style:{margin:0},children:[e.image_path&&s.jsx("div",{className:"col-4 col-md-4",style:{padding:0},children:s.jsx(u,{src:e.image_path,fallbackSrc:e.seller_avatar||void 0,srcSet:`${e.image_path} 1x, ${e.image_path} 2x`,sizes:"(max-width: 768px) 100vw, 33vw",className:"img-fluid rounded-start",style:{height:160,objectFit:"cover",width:"100%"}})}),s.jsx("div",{className:"col col-md-8",style:{padding:"12px"},children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start",children:[s.jsxs("div",{className:"pe-2 flex-grow-1 mb-2 mb-md-0",children:[s.jsx("h5",{className:"card-title mb-1",title:e.title,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"1rem",lineHeight:"1.2"},children:e.title}),s.jsxs("div",{className:"d-flex gap-1 flex-wrap mb-2",children:[i&&s.jsx("span",{className:"badge bg-success-subtle text-success",children:"Just added"}),e.brand&&s.jsx("span",{className:"badge bg-info-subtle text-info",children:e.brand}),e.vram_gb&&e.vram_gb>0&&s.jsxs("span",{className:"badge bg-warning-subtle text-warning",children:[e.vram_gb,"GB"]}),s.jsx("span",{className:`badge ${e.condition==="New"?"bg-success":"bg-secondary"}`,children:e.condition})]})]}),s.jsx("div",{className:"ms-2 text-end",style:{minWidth:90,alignSelf:"flex-start"},children:s.jsx("strong",{className:"text-dark",children:y(e.price)})})]}),s.jsx("p",{className:"card-text mt-2",children:e.description&&e.description.length>120?s.jsxs(s.Fragment,{children:[e.description.slice(0,120),"...",s.jsx("button",{href:"#",onClick:t=>{t.preventDefault(),t.currentTarget.previousSibling,t.currentTarget.parentElement.textContent=e.description||""},className:"ms-1 btn btn-link p-0",children:"Read more"})]}):e.description||""}),s.jsxs("p",{className:"card-text d-flex align-items-center gap-2",children:[e.seller_avatar&&s.jsx("img",{src:e.seller_avatar,className:"rounded-circle",style:{width:24,height:24,objectFit:"cover"}}),s.jsxs("small",{className:"text-muted flex-grow-1",children:["Seller: ",e.seller_name||""]}),e.created_at&&s.jsxs("small",{className:"text-muted ms-auto",children:["Added: ",_(e.created_at)]})]}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>a(e.id),children:"Details"}),s.jsx("div",{className:"text-muted small",title:`Seller: ${e.seller_name||""}`,children:e.seller_name||""})]})]})})]})})}export{k as G};
